package com.test.menu;

import java.util.Scanner;

import com.test.inputhandler.PropertyInputHandler;
import com.test.model.Property;
import com.test.service.*;
import com.test.serviceimpl.*;
import com.test.validation.PropertyValidation;

public class PropertyMenu {
	public static void showMenu() {
		final PropertyService ps = new PropertyServiceImpl();
		int ch=0;
		Scanner sc=new Scanner(System.in);
		
		do {
			System.out.println(" 1. ADD PROPERTY DETAILS\n 2. CALCULATE PROPERTY TAX\n 3. DISPLAY ALL PROPERTIES\n 4. BACK TO MAIN MENU");
			ch=sc.nextInt();
			switch(ch) {
			case 1:
				Property p=new Property();
				p.setBasevalue(
                        PropertyInputHandler.getValidatedDouble("Enter base value of land: ")
                );

                p.setBuiltuparea(
                        PropertyInputHandler.getValidatedBuiltUpArea("Enter built-up area of land: ")
                );

                p.setAge(
                        PropertyInputHandler.getValidatedAge("Enter age of land: ")
                );

                p.setIsinmaincity(
                        PropertyInputHandler.getValidatedCityInput("Is land in main city (Y/N): ")
                );
				ps.addProperty(p);
				break;
			case 2: 
				int id = PropertyInputHandler.getExistingPropertyId("Enter property id", ps);

			    if (id == -1) {
			        System.out.println("Returning to Property Menu...");
			        continue; 
			    }

			    double tax = ps.calculatePropertyTax(id);
			    System.out.println("Property tax for ID " + id + " is " + tax);
				break;
				
			case 3:
				ps.getAllProperties();
				break;
				
			case 4: 
				return;
			default: System.out.println("Enter correct choice");
			
			}
		}while(ch!=0);
	}
}

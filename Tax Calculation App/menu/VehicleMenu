package com.test.menu;

import java.util.Scanner;

import com.test.inputhandler.PropertyInputHandler;
import com.test.inputhandler.VehicleInputHandler;
import com.test.model.Vehicle;
import com.test.model.VehicleType;
import com.test.service.*;
import com.test.serviceimpl.*;

public class VehicleMenu {
	public static void showMenu() {
		final VehicleService vs=new VehicleServiceImpl();
		int ch=0;
		Scanner sc=new Scanner(System.in);
		do{
			System.out.println(" 1. ADD VEHICLE DETAILS\n 2. CALCULATE VEHICLE TAX\n 3. DISPLAY ALL VEHICLES\n 4. BACK TO MAIN MENU	");
			ch=sc.nextInt();
			switch(ch) {
			case 1:
				Vehicle v=new Vehicle();
				v.setRegistrationnumber(
	                    VehicleInputHandler.getValidatedRegistrationNumber("Enter registration number (4 digits): ")
	                );

	                v.setBrand(
	                    VehicleInputHandler.getValidatedBrand("Enter brand: ")
	                );

	                v.setMaxvelocity(
	                    VehicleInputHandler.getValidatedVelocity("Enter max velocity (120–300): ")
	                );

	                v.setCapacity(
	                    VehicleInputHandler.getValidatedCapacity("Enter seating capacity (2–50): ")
	                );

	                v.setVehicletype(
	                    VehicleInputHandler.getValidatedVehicleType("Select vehicle type:")
	                );

	                v.setPurchasecost(
	                    VehicleInputHandler.getValidatedPurchaseCost("Enter purchase cost (50,000–10,00,000): ")
	                );

				vs.addVehicle(v);
				break;
			case 2: 
				String reg = VehicleInputHandler.getExistingRegistrationNumber(
                        "Enter registration number to calculate tax: ", vs
                );
				if(reg==null) {
					 System.out.println("Returning to Vehicle Menu...");
				        continue; 
				}


                double tax = vs.calculateVehicleTax(reg);
                System.out.println("Vehicle tax for " + reg + " is: " + tax);
				break;
				
			case 3:
				vs.getAllVehicles();
				break;
				
			case 4: 
				return;
			default: System.out.println("Enter correct choice");
			
			}
			
		}while(ch!=0);
	}
}
